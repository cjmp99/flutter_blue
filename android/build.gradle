group 'com.pauldemarco.flutter_blue'  
version '1.0'  

buildscript {  
    repositories {  
        google()  
        mavenCentral() // JCenter ha sido descontinuado  
    }  

    dependencies {  
        classpath 'com.android.tools.build:gradle:7.3.0' // Usa un plugin estable y reciente  
        classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.15' // Asegúrate de que esta versión sea compatible  
    }  
}  

allprojects {  
    repositories {  
        google()  
        mavenCentral() // Asegúrate de que este sea el repositorio  
    }  
}  

apply plugin: 'com.android.library'  
apply plugin: 'com.google.protobuf'  

android {  
    namespace 'com.flutter_blue' // Tu namespace  
    compileSdkVersion 33 // Asegúrate de que esta sea la versión correcta  

    defaultConfig {  
        minSdkVersion 21 // Ajusta según sea necesario  
        targetSdkVersion 33 // Recomiendan que coincida con compileSdkVersion  
    }  

    sourceSets {  
        main {  
            java.srcDirs += 'src/main/java' // Directorio para código Java  
            proto.srcDir '../protos' // Asegúrate de que la ruta sea correcta y contenga archivos .proto  
        }  
    }  
}  

protobuf {  
    protoc {  
        artifact = 'com.google.protobuf:protoc:3.21.12' // Usa una versión más reciente de protoc  
    }  

    // Elimina el bloque "generateProtoTasks" si necesitas simplificar  
    generateProtoTasks {  
        all().forEach { task ->  
            task.builtins {  
                java {  
                    option 'lite' // Usar el runtime 'lite' para reducir el tamaño  
                }  
            }  
        }  
    }  
}  

dependencies {  
    implementation 'com.google.protobuf:protobuf-javalite:3.21.12' // Usa la versión correcta  
}
